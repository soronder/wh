{"version":3,"sources":["Session.js","Login.js","TextArea.js","utils.js","ImageList.js","App.js","reportWebVitals.js","index.js"],"names":["Session","state","token","localStorage","getItem","setToken","name","setItem","fetchAllMetaData","fetch","path","then","meta","query","search","URLSearchParams","response","text","JSON","parse","post","headers","body","method","stringify","Login","props","password","changeName","bind","changePassword","onKeyDown","onSubmit","error","setState","onAuth","console","log","e","this","target","value","keyCode","preventDefault","className","placeholder","onChange","type","React","Component","TextArea","size","sizeInBytes","finalSize","unit","Math","floor","CommentList","comments","map","comment","moment","time","format","author","Modal","editingDescription","submitComment","onKeyDownDescription","editDescription","submitDescription","stopPropagation","file","description","dir","index","onClick","closeModal","src","GalleryModal","open","setOpen","openModal","closeOnEscape","document","onkeydown","onModalClose","replace","claimed","style","backgroundImage","length","Directory","onOpen","accordionUid","totalDirSize","children","reduce","r","allowZeroExpanded","ImageList","directories","App","authed","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.81b6298b.chunk.js","sourcesContent":["export const Session = {\n    state: {},\n    token: localStorage.getItem('token'),\n    setToken(token, name) {\n        localStorage.setItem('token', token);\n        Session.token = token;\n        Session.name = name;\n    },\n    fetchAllMetaData() {\n        return Session.fetch({\n                path: '/meta',\n            })\n            .then(meta => {\n                Session.state = meta;\n                return meta;\n            });\n    },\n    fetch({ path, query }) {\n        query = query || {};\n        query.token = Session.token;\n        const search = new URLSearchParams(query);\n        return fetch(`${path}?${search}`)\n            .then(response => response.text())\n            .then(response => JSON.parse(response));\n    },\n    post({ path, query, headers, body }) {\n        query = query || {};\n        query.token = Session.token;\n        const search = new URLSearchParams(query);\n        return fetch(`${path}?${search}`, {\n                method: 'POST',\n                headers: headers || {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(body)\n            })\n            .then(response => response.text())\n            .then(response => JSON.parse(response));\n    }\n}","import React from \"react\";\n\nimport { Session } from \"./Session\";\n\nexport class Login\n    extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            name: \"\",\n            password: \"\"\n        };\n        this.changeName = this.changeName.bind(this);\n        this.changePassword = this.changePassword.bind(this);\n        this.onKeyDown = this.onKeyDown.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n    }\n    componentDidMount() {\n        if(Session.token) {\n            return Session.fetch({\n                    path: \"/loginvalidate\"\n                })\n                .then(({ error, name }) => {\n                    if(error) {\n                        this.setState({\n                            error: error,\n                        });\n                    }\n                    else if(name) {\n                        this.props.onAuth(name);\n                    }\n                    else {\n                        console.log(\"Unexpected error\");\n                    }\n                });\n        }\n    }\n    changeName(e) {\n        this.setState({\n            name: e.target.value\n        });\n    }\n    changePassword(e) {\n        this.setState({\n            password: e.target.value\n        });\n    }\n    onKeyDown(e) {\n        if(e.keyCode === 13) {\n            e.preventDefault();\n            this.onSubmit();\n        }\n    }\n    onSubmit() {\n        this.setState({\n            error: null,\n        });\n        return Session.post({\n                path: \"/login\",\n                body: {\n                    name: this.state.name,\n                    password: this.state.password,\n                }\n            })\n            .then(({ token, name, error }) => {\n                if(error) {\n                    this.setState({\n                        error: error,\n                    });\n                }\n                else if(token) {\n                    Session.setToken(token, name);\n                    this.props.onAuth(name);\n                }\n                else {\n                    console.log(\"Unexpected error\");\n                }\n            });\n    }\n    render() {\n        return (\n            <div className=\"login\">\n                <form onSubmit={this.onSubmit}>\n                    <input\n                        placeholder=\"Name\"\n                        onKeyDown={this.onKeyDown}\n                        onChange={this.changeName}\n                    />\n                    <input\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        onKeyDown={this.onKeyDown}\n                        onChange={this.changePassword}\n                    />\n                    <input\n                        type=\"submit\"\n                        value=\"Submit\"\n                    />\n                    {\n                        this.state.error &&\n                        <div className=\"error\">{this.state.error}</div>\n                    }\n                </form>\n            </div>\n        );\n    }\n}\n\nexport default Login;\n","import React from \"react\";\n\nexport class TextArea\n    extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            value: this.props.value || \"\"\n        };\n        this.onKeyDown = this.onKeyDown.bind(this);\n        this.onChange = this.onChange.bind(this);\n    }\n    onKeyDown(e) {\n        if(this.props.onKeyDown) {\n            this.props.onKeyDown(e);\n        }\n        if(e.keyCode === 13) {\n            e.preventDefault();\n            if(e.target.value !== this.props.value) {\n                this.props.onSubmit(e.target.value);\n                e.target.value = null;\n            }\n        }\n    }\n    onChange(e) {\n        this.setState({\n            value: e.target.value\n        });\n    }\n    render() {\n        return (\n            <textarea\n                placeholder={this.props.placeholder}\n                value={this.state.value}\n                onKeyDown={this.onKeyDown}\n                onChange={this.onChange}\n                onSubmit={this.props.onSubmit}\n            />\n        );\n    }\n}\n\nexport default TextArea;","export function size(sizeInBytes) {\n    let finalSize = sizeInBytes;\n    let unit = \"bytes\";\n    if(sizeInBytes > 1000000000) {\n        finalSize = sizeInBytes / 1000000000;\n        unit = \"GB\";\n    }\n    else if(sizeInBytes > 1000000) {\n        finalSize = sizeInBytes / 1000000;\n        unit = \"MB\";\n    }\n    else if(sizeInBytes > 1000) {\n        finalSize = sizeInBytes / 1000;\n        unit = \"KB\";\n    }\n    return `${Math.floor(finalSize)} ${unit}`;\n}","import React from \"react\";\nimport moment from \"moment\";\n\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemHeading,\n    AccordionItemButton,\n    AccordionItemPanel,\n} from 'react-accessible-accordion';\n\nimport 'react-accessible-accordion/dist/fancy-example.css';\n\nimport { Session } from \"./Session\";\nimport { TextArea } from \"./TextArea\";\nimport { size } from \"./utils\";\n\nimport './ImageList.css';\n\nclass CommentList\n    extends React.Component {\n    render() {\n        return (\n            <div className=\"comment-list\">\n            {\n                this.props.comments.map(comment => (\n                    <div key={`${comment.time}${comment.author}`}>\n                        <span className=\"time\">\n                            {moment(comment.time).format(\"MMM Do YYYY h:mm:ssa\")}\n                        </span>\n                        <span className=\"author\">{comment.author}</span>: {comment.comment}\n                    </div>\n                ))\n            }\n            </div>\n        );\n    }\n}\n\nclass Modal\n    extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            meta: {},\n            editingDescription: false,\n        };\n        this.submitComment = this.submitComment.bind(this);\n        this.onKeyDownDescription = this.onKeyDownDescription.bind(this);\n        // this.onKeyDownComment = this.onKeyDownComment.bind(this);\n        this.editDescription = this.editDescription.bind(this);\n        this.submitDescription = this.submitDescription.bind(this);\n    }\n    editDescription() {\n        this.setState({ editingDescription: true });\n    }\n    onKeyDownDescription(e) {\n        if(e.keyCode === 27) {\n            e.stopPropagation();\n            this.setState({ editingDescription: false });\n        }\n    }\n    submitDescription(value) {\n        Session.post({\n            path: '/meta',\n            query: { path: this.props.file.path },\n            body: { description: value },\n        })\n        .then(meta => {\n            this.setState({\n                meta: meta,\n                editingDescription: false,\n            });\n        });\n    }\n    componentDidMount() {\n        Session.fetch({\n            path: '/meta',\n            query: { path: this.props.file.path },\n        })\n        .then(meta => {\n            this.setState({ meta });\n        });\n    }\n    // onKeyDownComment(e) {\n    //     if(e.keyCode === 13) {\n    //         e.preventDefault();\n    //         this.submitComment(e.target.value);\n    //         e.target.value = null;\n    //     }\n    // }\n    submitComment(value) {\n        Session.post({\n            path: '/meta',\n            query: { path: this.props.file.path },\n            body: { comment: value }\n        })\n        .then(meta => {\n            this.setState({ meta });\n        });\n    }\n    render() {\n        const {file, dir, index} = this.props;\n        let description, comments;\n        if(this.state.meta) {\n            ({description, comments} = this.state.meta);\n        }\n        return (\n            <div className=\"modal\">\n                <div className=\"modal-body\">\n                    <h2 className=\"modal-header\">\n                        {file.name}\n                        <span onClick={this.props.closeModal} className=\"modal-close\">X</span>\n                    </h2>\n                    <div className=\"modal-content\">\n                        <div className=\"column\">\n                            <img src={`${file.path}`} />\n                        </div>\n                        <div className=\"column\">\n                            <div className=\"description\">\n                                {\n                                    this.state.editingDescription ? (\n                                        <TextArea\n                                            placeholder=\"Add Description...\"\n                                            value={description}\n                                            onSubmit={this.submitDescription}\n                                            onKeyDown={this.onKeyDownDescription}\n                                        />\n                                    ) : (\n                                        <div>\n                                            {description}\n                                            <i className=\"far fa-edit\" onClick={this.editDescription}></i>\n                                        </div>\n                                    )\n                                }\n                            </div>\n                            <div className=\"comment-box\">\n                                {comments ? <CommentList comments={comments} /> : \"No comments\"}\n                                <div>\n                                    <TextArea\n                                        placeholder=\"Add Comment...\"\n                                        onSubmit={this.submitComment}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"modal-footer\">\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass GalleryModal\n    extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            open: false,\n        };\n        this.closeModal = this.setOpen.bind(this, false);\n        this.openModal = this.setOpen.bind(this, true);\n        this.closeOnEscape = this.closeOnEscape.bind(this);\n    }\n    closeOnEscape(e) {\n        if(e.keyCode === 27) {\n            e.preventDefault();\n            this.closeModal();\n        }\n    }\n    setOpen(open) {\n        this.setState({open});\n        if(open) {\n            document.onkeydown = this.closeOnEscape;\n        }\n        else {\n            document.onkeydown = null;\n            if(this.props.onModalClose) {\n                this.props.onModalClose();\n            }\n        }\n    }\n    componentDidUpdate() {\n        document.body.className = document.body.className.replace(\"modal-open\", \"\");\n        if(this.state.open) {\n            document.body.className += \" modal-open\";\n        }\n    }\n    render() {\n        const {file, dir, index} = this.props;\n        let comments, claimed;\n        if(this.props.meta) {\n            ({ comments, claimed } = this.props.meta);\n        }\n        return [\n            <div\n                key=\"img\"\n                className=\"img\"\n                style={{backgroundImage: `url(\"${file.path}\")`}}\n                onClick={this.openModal}\n            >\n                {\n                    comments && comments.length > 0 && \n                    <i className={`far fa-${comments.length > 1 ? \"comments\" : \"comment\"}`}></i>\n                }\n                {\n                    claimed && \n                    <i className={`fas fa-heart`}></i>\n                }\n                <div>{file.name}</div>\n            </div>,\n            this.state.open && <Modal key=\"modal\" dir={dir} file={file} index={index} closeModal={this.closeModal} />\n        ];\n    }\n}\n\nclass Directory\n    extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            meta: {}\n        };\n        this.onOpen = this.onOpen.bind(this);\n    }\n    onOpen(accordionUid) {\n        Session.fetchAllMetaData()\n            .then(meta => {\n                this.setState({ meta });\n            });\n    }\n    render() {\n        const {dir} = this.props;\n        const totalDirSize = dir.children.reduce((r, file) => r + file.size, 0);\n        return (\n            <Accordion allowZeroExpanded={true} onChange={this.onOpen}>\n                <AccordionItem>\n                    <AccordionItemHeading>\n                        <AccordionItemButton>\n                            {dir.name}\n                            <span>\n                                {dir.children.length} items - {size(totalDirSize)}\n                            </span>\n                        </AccordionItemButton>\n                    </AccordionItemHeading>\n                    <AccordionItemPanel>\n                        {dir.children.map((file, index) => {\n                            if (file.type === \"directory\") {\n                                return <Directory key={file.path} dir={file} />;\n                            }\n                            else if (file.type === \"file\") {\n                                return (\n                                    <GalleryModal\n                                        key={file.path}\n                                        file={file}\n                                        dir={dir}\n                                        index={index}\n                                        meta={this.state.meta[file.path]}\n                                        onModalClose={this.onOpen}\n                                    />\n                                );\n                            }\n                            return null;\n                        })}\n                    </AccordionItemPanel>\n                </AccordionItem>\n            </Accordion>\n        );\n    }\n}\n\nexport class ImageList \n    extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { dir: null };\n    }\n    componentDidMount() {\n        Session.fetch({\n            path: '/dir',\n        })\n        .then(directories => {\n            this.setState({\n                dir: directories\n            });\n        });\n\n        Session.fetch({\n            path: '/meta',\n        })\n        .then(meta => {\n            this.setState({ meta });\n        });\n    }\n    render() {\n        if (!this.state.dir) {\n            return null;\n        }\n        return (\n            <div className=\"image-list\">\n                <Directory dir={this.state.dir} />\n            </div>\n        );\n    }\n}\n\nexport default ImageList;\n","import React from \"react\";\n\nimport './App.css';\n\nimport { Login } from \"./Login\";\nimport { ImageList } from \"./ImageList\";\n\nimport \"./lib/fontawesome-free-5.15.2-web/css/all.min.css\";\n\nexport class App\n    extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            authed: false,\n        };\n        this.onAuth = this.onAuth.bind(this);\n    }\n    onAuth(name) {\n        this.setState({\n            authed: true,\n            name: name,\n        });\n    }\n    render() {\n        return (\n            <div className=\"App\">\n                {\n                    this.state.authed ? <ImageList /> : <Login onAuth={this.onAuth} />\n                }\n            </div>\n        );\n    }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}